<div class="sidebar" ng-init="selected = {toc:true}" ng-hide="mode.preview">
    <div class="sidebar-header">
        <div class="chapter-header">
            <a ng-click="selected = {toc:true}" class="toc-link">Table of Contents</a>
            <div class="chapter-nav">
                <a ng-click="previousChapter()" ng-disabled="mapManager.storyChapter == 1" class="arrow"><i class="fa fa-caret-left"></i></a>
                <h1 class="sidebar-title">{{ mapManager.storyChapter}} <strong>{{ mapManager.storyMap.getStoryTitle()  }}</strong></h1>
                <a ng-click="nextChapter()" ng-disabled="mapManager.storyChapter == mapManager.chapterCount" class="arrow"><i class="fa fa-caret-right"></i></a>
            </div>
        </div>
    </div>
    <div class="sidebar-main">
        <nav class="sidebar-nav">
            <a ng-click="selected = {layers:true}"><i class="fa fa-info-circle" ng-class="selected.layers && 'active'"></i></a>
            <a ng-click="selected = {settings:true}"><i class="fa fa-play-circle-o" ng-class="selected.settings && 'active'"></i></a>
            <a ng-click="selected = {legend:true}"><i class="fa fa-list-alt" ng-class="selected.legend && 'active'"></i></a>
            <a href="#"><i class="fa fa-clone"></i></a>
            <a ng-click="selected = {pins:true}"><i class="fa fa-map-pin" ng-class="selected.pins && 'active'"></i></a>
            <a ng-click="selected = {frames:true}"><i class="fa fa-object-group" ng-class="selected.frames && 'active'"></i></a>
        </nav>
        <div class="sidebar-content">
            <div ng-if="selected.toc"> <div class="sidebar-toc-content">
                <h1 class="sidebar-title"><strong>Table of Contents</strong></h1>
                <p class="sidebar-instructions">Click and drag to re-order chapters.</p>
                <button class="sidebar-button">Add New Chapter</button>
                <div ng-repeat="chapter in mapManager._config.chapters" class="contents-chapter">
                    <div class="contents-summary">
                        <h2 class="chapter-number">{{ chapter.id}}</h2>
                        <h2>{{ chapter.about.title }}</h2>
                        <i class="fa fa-trash delete"></i>
                        <p>
                            {{ chapter.about.abstract }}
                        </p>
                    </div>
                    <a href="chapter_info.html" class="arrow"><i class="fa fa-lg fa-caret-right"></i></a>
                </div>
            </div></div>
            <div ng-if="selected.pins">
              <storypin-sidebar></storypin-sidebar>
            </div>
            <div  ng-if="selected.layers">
                <h2 class="section-title">Chapter Info</h2>
                <form>
                    <div class="form-field">
                        <label for="chapter_title">Chapter Title</label>
                        <strong><abbr title="required">*</abbr></strong>
                        <br />
                        <input id="chapter_title" type="text" name="chapter_title" required />
                    </div>
                    <div class="form-field">
                        <label for="chapter_summary">Chapter Summary</label>
                        <strong><abbr title="required">*</abbr></strong>
                        <br />
                        <textarea id="chapter_summary" rows="10" name="chapter_summary" required /></textarea>
                    </div>
                </form>
            </div>
            <div ng-if="selected.frames">
                <section>
                    <h2 class="section-title float-left">StoryFrames</h2>
                    <button class="sidebar-button float-right">Add New StoryFrame</button>
                    <p class="clearfix">
                        A StoryFrame defines the area of the map a viewer of your story will see.
                        Set the default StoryFrame below, or create additional StoryFrames to
                        override the part of the map your viewers will see for this chapter.
                    </p>
                </section>
                <section class="accordion-item active">
                    <div class="title-row">
                        <h2>Default StoryFrame</h2>
                        <i class="fa fa-trash delete"></i>
                        <i class="fa fa-caret-up caret"></i>
                    </div>
                    <p>
                        Set the StoryFrame your viewers will see when this chapter begins.
                    </p>
                </section>
                <section class="accordion-item">
                    <div class="title-row">
                        <h2>StoryFrame Name 1</h2>
                        <i class="fa fa-trash delete"></i>
                        <i class="fa fa-caret-down caret"></i>
                    </div>
                </section>
                <section class="accordion-item">
                    <div class="title-row">
                        <h2>StoryPin Name</h2>
                        <i class="fa fa-trash delete"></i>
                        <i class="fa fa-caret-up caret"></i>
                    </div>


                    <div pin-editor>
                        <pin-editor-form></pin-editor-form>
                        <button class="btn btn-inverse" ng-disabled="!pinCtrl.isFormValid()"
                                ng-click="pinsCtrl.saveStoryPin()">Save
                        </button>
                    </div>

                    <form>
                        <div class="form-field">
                            <label for="storypin_title">StoryFrame Title</label>
                            <strong><abbr title="required">*</abbr></strong>
                            <br />
                            <input id="storypin_title" type="text" name="storypin_title" />
                        </div>
                        <div class="form-field">
                            <label for="start_time">Start Time</label>
                            <strong><abbr title="required">*</abbr></strong>
                            <br />
                            <input type="date" name="start_time_date">
                            <input type="time" name="start_time_time">
                        </div>
                        <div class="form-field">
                            <label for="end_time">End Time</label>
                            <strong><abbr title="required">*</abbr></strong>
                            <br />
                            <input type="date" name="end_time_date">
                            <input type="time" name="end_time_time">
                            <br /><br />
                            <p>Set placement for this StoryFrame on the map.</p>
                        </div>
                    </form>
                </section>
                <section class="accordion-item">
                    <div class="title-row">
                        <h2>StoryFrame Name 3</h2>
                        <i class="fa fa-trash delete"></i>
                        <i class="fa fa-caret-down caret"></i>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
